"use strict";const productNavigationTabs=document.querySelector(".products__navigation"),productTabs=document.querySelectorAll(".products__navigation-btn"),products=document.querySelectorAll(".product");productNavigationTabs&&productTabs&&(productTabs.forEach((e=>{e.addEventListener("click",(function(){for(let e of productTabs)e.classList.remove("_active");e.classList.add("_active");for(let t of products)t.classList.remove("_active"),t.dataset.category===e.dataset.category&&t.classList.add("_active")}))})),productTabs[0].addEventListener("click",(function(){for(let e of products)e.classList.add("_active")}))),document.addEventListener("click",(function(e){if(e.target.classList.contains("product__size")){let t=e.target,r=t.parentNode.parentNode.querySelector(".price .price-number"),o=t.parentNode.children;for(let e of o)e.classList.remove("_active");t.classList.add("_active"),r.innerText=t.dataset.price}}));const orderBtns=document.querySelectorAll(".product__buy"),orderTable=document.querySelector(".order-table");let order={totalPrice:0,counter:0,positions:0};function positions(){return order.positions=Object.keys(order).length-3}function counter(){let e=0;for(let t of Object.values(order))"object"==typeof t&&(e+=t.counter);return order.counter=e}function totalPrice(){let e=0;for(let t of Object.values(order))"object"==typeof t&&(e+=t.totalPrice);return order.totalPrice=e}const makeOrder=document.querySelector(".pop-up__body-makeorder");function makeOrderDisabled(){Object.keys(order).length-3==0?makeOrder.disabled=!0:makeOrder.disabled=!1}const totalPriceElement=document.querySelector(".totalPrice__scoreboard");function changeValueTotalPriceElement(){totalPriceElement.innerHTML=order.totalPrice}function localStorageOrder(){localStorage.setItem("order",JSON.stringify(order))}function localStorageCart(){localStorage.setItem("cartInner",orderTable.innerHTML)}function additionalFunctions(){positions(),counter(),totalPrice(),makeOrderDisabled(),changeValueTotalPriceElement(),localStorageOrder(),localStorageCart()}class OrderItem{constructor(e,t){this.size=e,this.price=t,this.counter=1,this.totalPrice=this.price*this.counter}}const cartBox=document.querySelector(".cart__box"),orderTableEmtyHTML='<p class="pop-up__body-table-empty">Cart is empty</p>';function checkingOrderEmptyness(){Object.keys(order).length>0&&orderTableEmpty?orderTableEmpty.remove():orderTable.innerHTML=orderTableEmtyHTML}function deleteElement(e){let t=e.closest(".order-table__item");t.remove(),delete order[t.dataset.name],0===orderTable.querySelectorAll(".order-table__item").length&&(orderTable.innerHTML=orderTableEmtyHTML),additionalFunctions(),cartBox.setAttribute("data-counter",order.counter),console.log(order)}function changeCartItemCounter(e){let t=e,r=t.dataset.action,o=t.closest(".item-counter").querySelector(".item-counter__scoreboard"),c=t.closest(".order-table__item"),a=c.dataset.name,n=c.querySelector(".item-price__scoreboard"),i=c.dataset.pricebyone;"+"===r?(o.innerHTML++,order[a].counter++):o.innerHTML>1&&(o.innerHTML--,order[a].counter--),order[a].totalPrice=order[a].counter*i,n.innerHTML=order[a].totalPrice,additionalFunctions(),cartBox.setAttribute("data-counter",order.counter),console.log(order)}orderBtns.forEach((e=>{e.addEventListener("click",(()=>{let t=e.closest(".product"),r=t.querySelector(".product__size._active").dataset.size,o=t.querySelector(".product__size._active").dataset.price,c=t.querySelector(".product__title").innerText+" "+r,a=t.querySelector(".product__image > img").src,n=t.querySelector(".product__image > img").alt,i=new OrderItem(r,o);Object.keys(order).includes(c)?(order[c].counter++,order[c].totalPrice=order[c].price*order[c].counter):order[c]=i;let l=`<article class="order-table__item" data-name="${c}" data-pricebyone="${o}">             \n                           <header class="order-table__item-header">\n                              <h3 class="order-table__item-title product__title">${c}</h3>\n                           </header>\n                           <button class="order-table__item-delete" onclick="deleteElement(this)" title="delete item from cart">\n                              <svg width="72px" height="72px" viewBox="0 0 72 72" id="emoji" xmlns="http://www.w3.org/2000/svg"style="enable-background:new 0 0 60 60;">\n                                 <g id="line">\n                                 <line x1="17.5" x2="54.5" y1="17.5" y2="54.5" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" stroke-width="2"/>\n                                 <line x1="54.5" x2="17.5" y1="17.5" y2="54.5"  stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" stroke-width="2"/>\n                                 </g>\n                              </svg>\n                           </button>\n                           <figure class="order-table__item-image _ibg">\n                              <img src="${a}" alt="${n}">\n                           </figure>\n                           <div class="order-table__item-aside">\n                              <div class="order-table__item-counter item-counter">\n                                 <button class="item-counter__btn item-counter__minus" data-action="-" onclick="changeCartItemCounter(this)"><span>-</span></button>\n                                 <p class="item-counter__scoreboard">${order[c].counter}</p>\n                                 <button class="item-counter__btn item-counter__plus" data-action="+" onclick="changeCartItemCounter(this)">+</button>\n                              </div>\n                              <p class="order-table__item-price item-price">\n                                 <span class="item-price__scoreboard">${order[c].totalPrice}</span> \n                              â‚´\n                              </p>\n                           </div>\n                        </article>`,d=orderTable.querySelector(`.order-table__item[data-name="${c}"]`);d?(d.querySelector(".item-counter__scoreboard").innerHTML=order[c].counter,d.querySelector(".item-price__scoreboard").innerText=order[c].totalPrice):orderTable.innerHTML+=l;const s=orderTable.querySelectorAll(".order-table__item"),u=orderTable.querySelector(".pop-up__body-table-empty");s&&u&&u.remove(),additionalFunctions(),cartBox.setAttribute("data-counter",order.counter),console.log(order)}))}));const cartPopUp=document.querySelector(".pop-up"),cartBtn=document.querySelector(".cart"),cartClose=document.querySelector(".pop-up__close");cartBtn.addEventListener("click",(()=>{cartPopUp.classList.add("_active"),document.body.classList.add("_lock")})),cartClose.addEventListener("click",(()=>{cartPopUp.classList.remove("_active"),document.body.classList.remove("_lock")})),document.addEventListener("click",(e=>{e.target.classList.contains("pop-up")&&(cartPopUp.classList.remove("_active"),document.body.classList.remove("_lock"))}));let orderFromLocalStorage=localStorage.getItem("order");orderFromLocalStorage&&(order=JSON.parse(orderFromLocalStorage)),cartBox.setAttribute("data-counter",order.counter),Object.keys(order).length-3>0&&(orderTable.innerHTML=localStorage.getItem("cartInner")),changeValueTotalPriceElement(),makeOrderDisabled(),console.log(order);const arrow=document.querySelector(".arrow"),select=document.querySelector(".arrow > select");arrow.addEventListener("click",(e=>{arrow.classList.toggle("up")})),document.addEventListener("click",(e=>{arrow.classList.contains("up")&&e.target!==select&&arrow.classList.remove("up")}));